#Mac
if [[ "$OSTYPE" == "darwin"* ]]; then
    # Set CLICOLOR if you want Ansi Colors in iTerm2 
    export CLICOLOR=1
    
    # Set colors to match iTerm2 Terminal Colors
    export TERM=xterm-256color
    PS1='\[\e[33;1m\]\u@\h: \[\e[31m\]\W\[\e[0m\]$ '
    export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx
    
    alias ll="ls -la"
    alias ls="ls -a"
    
    ## Make ~/bin my goto path
    #[[ :$PATH: == *:$HOME/bin:* ]] || PATH=$HOME/bin:$PATH
    # git rev-list --all | xargs git grep <regex> #----> git search for a phrase in content of the commit
    
    # Grep default options
    export GREP_OPTIONS='--color=auto --exclude=*.pyc --exclude-dir=.git --exclude=cscope.out --exclude=tags'
    #-e PORTABLEVIM=/Users/linh_nguyen2/Documents/pubrepos/portablevim
    
    
    # Setting PATH for Python 3.8
    # The original version is saved in .bash_profile.pysave
    # Avoid duplicating PATH entries
    add_to_path() {
      case ":$PATH:" in
        *"$1:"*) ;;
        *) PATH="$1:$PATH" && export PATH;;
      esac
    }
    
    # Add needed paths cleanly
      add_to_path "/Library/Frameworks/Python.framework/Versions/3.10/bin"
      add_to_path "~/repos/portablevim"
      add_to_path "/opt/homebrew/bin"
    
    #if command -v tmux &> /dev/null && [ -n "$PS1" ] && [[ ! "$TERM" =~ screen ]] && [[ ! "$TERM" =~ tmux ]] && [ -z "$TMUX" ]; then
    #  exec tmux
    #fi
#Cygwin
elif [[ "$OSTYPE" == "cygwin" ]]; then
    if [ -f "${HOME}/.bashrc" ] ; then
        source "${HOME}/.bashrc"
    fi
fi
source ~/.proprietary.sh
stty sane


if command -v tmux &> /dev/null &&  # Check if tmux is installed and available
    [ -n "$PS1" ] &&            # Check if this is an interactive shell
    [[ ! "$TERM" =~ screen ]] && # Check if not already in a screen session
    [[ ! "$TERM" =~ tmux ]] &&  # Check if not already in a tmux session
    [ -z "$TMUX" ]; then       # Check if the TMUX variable is not set (i.e., not inside tmux)
  tmux
fi

function fzfgitlog() {
  git log --graph --color=always --format="%C(auto)%h%d %s %C(black)%C(bold)%cr" "$@" |
  fzf --ansi --no-sort --reverse --tiebreak=index --bind=ctrl-s:toggle-sort \
      --preview="grep -oE '[a-f0-9]{7,}' <<< {} | head -1 | xargs -I % sh -c 'git show --color=always % | less -R'" \
      --header="Press CTRL-S to toggle sort" --preview-window=right:70%
}
